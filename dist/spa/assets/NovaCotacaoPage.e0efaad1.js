import{Q as v,a as w}from"./QForm.bdb98b3b.js";import{i as f,j as p,t as g,B as b,au as y,av as k,v as B,_ as S,r as u,F as A,G as z,H as c,I as D,K as s,M as r,Q as h,aw as F,w as N,ax as P,N as n,O as U}from"./index.c86804d0.js";import{Q as j}from"./QSeparator.fd342983.js";import{u as I,a as M}from"./format.eae10d4a.js";import{Q as T,k as G}from"./use-quasar.4c1520d5.js";import{api as q}from"./axios.e3324e7c.js";import{u as H}from"./user-store.7de37fee.js";var K=f({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:o}){const t=p(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>g(e.tag,{class:t.value},b(o.default))}}),O=f({name:"QCardActions",props:{...y,vertical:Boolean},setup(e,{slots:o}){const t=k(e),a=p(()=>`q-card__actions ${t.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>g("div",{class:a.value},b(o.default))}}),R=f({name:"QCard",props:{...I,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:o}){const{proxy:{$q:t}}=B(),a=M(e,t),i=p(()=>"q-card"+(a.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>g(e.tag,{class:i.value},b(o.default))}});const E={setup(){const e=u({bem:"",valor_do_bem:"",quantidade_parcelas:""}),o=G(),t=u([]),a=u(!1),i=u([]),m=H(),l=m.getToken,C=m.getUser,x=D();function Q(){const _={headers:{Authorization:`Bearer ${l}`}};q.post("/api/v1/cotacao/"+C.id,t.value,_).then(()=>{o.notify({color:"success",position:"top",message:"Cota\xE7\xE3o salva",icon:"success"}),x.push({name:"cotacoes"})}).catch(d=>{d.response.status===400?o.notify({color:"negative",position:"top",message:d.response.data,icon:"report_problem"}):o.notify({color:"negative",position:"top",message:"Falha ao comunicar com o servidor.",icon:"report_problem"})})}function V(){const _={headers:{Authorization:`Bearer ${l}`}};q.post("/api/v1/cotacao/processamento",e.value,_).then(d=>{t.value=d.data,a.value=!0}).catch(()=>{o.notify({color:"negative",position:"top",message:"Falha ao comunicar com o servidor.",icon:"report_problem"})})}return{form:e,salvarCotacao:Q,cotacaoAtual:t,cotacao:i,cotar:V,existeCotacao:a}}},J={class:"col-md-4 col-sm-6 col-xs-10 q-gutter-y-md"},L=r("p",{class:"text-h5 text-center"},"Informe os dados do bem que deseja cotar o seguro",-1),W={class:"full-width q-pd-md"},X={class:"row justify-center"},Y={class:"col-md-4 col-sm-6 col-xs-10 q-my-lg"},Z={class:"text-subtitle2"},$={class:"text-subtitle2"},aa={class:"text-subtitle2"},oa={class:"text-subtitle2"},ea={class:"text-subtitle2"},ta=U("Salvar Cota\xE7\xE3o");function sa(e,o,t,a,i,m){return A(),z(T,{padding:""},{default:c(()=>[s(w,{class:"row justify-center",onSubmit:F(a.cotar,["prevent"])},{default:c(()=>[r("div",J,[L,s(v,{label:"Descri\xE7\xE3o do bem",modelValue:a.form.bem,"onUpdate:modelValue":o[0]||(o[0]=l=>a.form.bem=l)},null,8,["modelValue"]),s(v,{label:"Valor do bem",modelValue:a.form.valor_do_bem,"onUpdate:modelValue":o[1]||(o[1]=l=>a.form.valor_do_bem=l)},null,8,["modelValue"]),s(v,{label:"Parcelas",modelValue:a.form.quantidade_parcelas,"onUpdate:modelValue":o[2]||(o[2]=l=>a.form.quantidade_parcelas=l)},null,8,["modelValue"]),r("div",W,[s(h,{label:"Fazer cota\xE7\xE3o",color:"primary",outlined:"",rounded:"",onClick:a.cotar,size:"md",class:"full-width"},null,8,["onClick"])])])]),_:1},8,["onSubmit"]),N(r("div",X,[r("div",Y,[s(R,{class:"my-card"},{default:c(()=>[s(K,{class:"bg-info text-white"},{default:c(()=>[r("div",Z,"Bem: "+n(a.cotacaoAtual.bem),1),r("div",$,"Valor do bem: "+n(a.cotacaoAtual.valor_do_bem),1),r("div",aa,"Valor total seguro: "+n(a.cotacaoAtual.valor_total_seguro),1),r("div",oa,"Quantidade parcelas: "+n(a.cotacaoAtual.quantidade_parcelas),1),r("div",ea,"Valor parcela seguro: "+n(a.cotacaoAtual.valor_parcela_seguro),1)]),_:1}),s(j),s(O,{align:"right"},{default:c(()=>[s(h,{stack:"",glossy:"",color:"accent",onClick:o[3]||(o[3]=l=>a.salvarCotacao())},{default:c(()=>[ta]),_:1})]),_:1})]),_:1})])],512),[[P,a.existeCotacao]])]),_:1})}var ma=S(E,[["render",sa]]);export{ma as default};
